###########################
# Mirkwood Events
###########################

add_namespace = mirkwood

# Interfere in Erebor
country_event = {
	id = mirkwood.1
	title = mirkwood.1.t
	desc = mirkwood.1.d
	picture = GFX_report_event_paper

	fire_only_once = yes

	trigger = {
		tag = MIR
		ERE = { has_offensive_war_with = DAL }
	}

	mean_time_to_happen = {
		days = 1
	}

	option = { #Cease hostilities!
		name = mirkwood.1.a
		ai_chance = {
			base = 100
		}
		ERE = { country_event = { days = 1 id = mirkwood.2 } }
	}
	option = { #Let them be
		name = mirkwood.1.b
		ai_chance = {
			base = 10
			modifier = {
				add = 50
				THIS = { has_government = revolutionary }
			}
			modifier = {
				has_opinion = { target = ERE value > 50 }
				add = 50
			}
			modifier = {
				add = 20
				strength_ratio = { tag = ERE ratio < 2.5 }
			}
		}
	}

}


# Erebor prompted to stand down
country_event = {
	id = mirkwood.2
	title = mirkwood.2.t
	desc = mirkwood.2.d
	picture = GFX_report_event_paper

	fire_only_once = yes

	is_triggered_only = yes

	option = { #Accept
		name = mirkwood.2.a
		ai_chance = {
			base = 50
			modifier = {
				add = 20
				THIS = { has_government = cooperative }
			}
		}
		ERE = { white_peace = DAL }
		MIR = { give_guarantee = DAL }
		hidden_effect = {news_event = { hours = 10 id = news.350 }}
	}
	option = { #Refuse
		name = mirkwood.2.b
		ai_chance = {
			base = 50
			modifier = {
				add = 200
				THIS = { has_government = belligerent }
			}
			modifier = {
				has_opinion = { target = MIR value < 0 }
				add = 15
			}
			modifier = {
				add = 30
				strength_ratio = { tag = MIR ratio > 0.6 }
			}
			modifier = {
				add = 30
				ERE = { has_country_leader = { ruling_only = yes name = "Da√≠n II Ironfoot" } }
			}
		}
		MIR = { create_wargoal = { type = annex_everything target = ERE } }
	}

}

# Ents asked to join
country_event = {
	id = mirkwood.3
	title = mirkwood.3.t
	desc = mirkwood.3.d
	picture = GFX_report_event_paper

	fire_only_once = yes

	is_triggered_only = yes

	option = { #Accept
		name = mirkwood.3.a
		ai_chance = {
			base = 50
			modifier = {
				add = 20
				THIS = { has_government = belligerent }
			}
		}
		MIR = { add_to_faction = ENT }
	}
	option = { #Refuse
		name = mirkwood.3.b
		ai_chance = {
			base = 10
			modifier = {
				has_opinion = { target = MIR value < -30 }
				add = 20
			}
		}
	}

}

### Angmar demands right to string in trade of peace
country_event = {
	id = mirkwood.13
	title = mirkwood.13.t
	desc = mirkwood.13.d
	picture = GFX_report_event_building_sawmill

	fire_only_once = yes
	is_triggered_only = yes

	option = {#accept
		name = mirkwood.13.a
		ai_chance = {
			base = 25
			modifier = {
				add = 5
				has_non_aggression_pact_with = ANG
			}
			modifier = {
				add = 25
				is_in_faction_with = ANG
			}
			modifier = {
				add = 10
				has_opinion = {
					target = ANG
					value > 75
				}
			}
			modifier = {
				add = 25
				has_war = yes
				NOT = { has_war_with = ANG }
			}
		}
		ANG = {
            add_opinion_modifier = { target = MIR modifier = large_increase }
            country_event = { id = angmar.14 days = 5 }
        }
		give_resource_rights = { receiver = ANG state = 85 resources = { tungsten } }
	}

	
	option = {#denie
		name = mirkwood.13.b
		ai_chance = {
			base = 40
			modifier = {
				add = 10
				has_opinion = {
					target = ANG
					value < 0
				}
			}
			modifier = {
				add = -25
				has_war_with = ANG
			}
		}
		ANG = {
			add_opinion_modifier = { target = MIR modifier = medium_decrease }
			add_war_support = 0.05
			add_state_claim = 85
			country_event = { id = angmar.15 days = 5 }
		}
		add_opinion_modifier = { target = MIR modifier = small_decrease }
	}
}

country_event = {
	id = mirkwood.14 #Aragorn delivered Gollum
	title = mirkwood.14.t
	desc = mirkwood.14.d
	picture = GFX_report_event_horseman_wanderer

	is_triggered_only = yes
	option = {
		name = mirkwood.14.a
		set_country_flag = MIR_aragorn_delivered_gollum
		complete_national_focus = MIR_take_gollum_into_custody
	}
}

country_event = {
	id = mirkwood.15 #Gollum escaped
	title = mirkwood.15.t
	desc = mirkwood.15.d
	picture = GFX_report_event_science_research_paper_library2

	is_triggered_only = yes

	option = {
		name = mirkwood.15.a
		set_country_flag = MIR_gollum_escaped
		complete_national_focus = MIR_escape_of_gollum
	}
}

country_event = {
	id = mirkwood.16 #Gollum couldn't escape
	title = mirkwood.16.t
	desc = mirkwood.16.d
	picture = GFX_report_event_paper

	is_triggered_only = yes

	option = {
		name = mirkwood.16.a
		set_country_flag = MIR_gollum_in_custody
		complete_national_focus = MIR_extract_information
	}
}

country_event = {
	id = mirkwood.17 #Proposal from Mirkwood
	title = mirkwood.17.t
	desc = mirkwood.17.d
	picture = GFX_report_event_paper

	is_triggered_only = yes

	option = {
		name = mirkwood.17.a
		add_war_support = 0.05
		set_country_flag = LTH_accepted_joint_invasion
		ai_chance = {
			base = 10
			modifier = {
				has_opinion = { target = MIR value > 50 }
				add = 50
			}
			modifier = {
				is_historical_focus_on = yes
				add = 500
			}
		}
	}
	option = {
		name = mirkwood.17.b
		add_political_power = 50
		ai_chance = {
			base = 10
			modifier = {
				has_opinion = { target = MIR value < 0 }
				add = 50
			}
		}
	}
}

	country_event = {
	id = mirkwood.18 #DGU war
	title = mirkwood.18.t
	desc = mirkwood.18.d
	picture = GFX_report_event_army_camp

	fire_only_once = no

	is_triggered_only = yes

	option = { # east lorien
	name = mirkwood.18.a
	ai_chance = {
		base = 2
		modifier = {
			add = 1000
			is_historical_focus_on = yes
		}
	}
	complete_national_focus = MIR_forge_east_lorien
	}
	
	option = { # woodland reunited
	name = mirkwood.18.b
	ai_chance = {
	base = 1 }
	complete_national_focus = MIR_reclaim_amon_lanc
	}
}